---
title: 效率
date: 2018-10-28 17:15:05
tags:
categories: More Effective C++
---

1. 谨记 80-20 法则
   - 一个程序 80% 的资源用于 20% 的代码身上。
   - 找出瓶颈的可行之道是完全根据观察或实验来识别出那 20% 代码，而辨别之道就是借助某个程序分析器。
2. 考虑使用 lazy evaluation
   - 引用计数，避免非必要的对象复制
   - 区分读和写，区别 operator [] 的读取和写操作
   - 缓式取出，避免非必要的数据库读取动作
   - 表达式缓评估，避免非必要的数值计算动作

3. 分期摊还预期的计算成本

   - caching技术，将常用的数据缓存下来
   - prefetching技术，比如容器的扩容
   - 本条款体现空间可以交换时间

4. 了解临时对象的来源

   - C++ 真正的所谓临时对象是不可见的——不会在你的源代码中出现。只要你产生一个 non-heap object 而没有为它命名，变产生一个临时对象。
   - 此等匿名对象通常发生于两种情况：一是当隐式类型转换被施行起来以求函数调用能够成功；二是但函数返回对象的时候。
   - 只有当对象以 by value 方式传递，或是当对象被传递给一个 reference-to-const 参数时，这些转换才会发生。如果对象被传递给一个 reference-to-non-const 参数，并不会发生此类转换。原因是发生隐式类型转换时会产生临时对象，对引用的修改实际是修改的临时对象，而不是修改的引用，与传引用参数的目的不符。
   - 任何时候只要看到一个 reference-to-const 参数，就极可能会有一个临时对象被产生出来绑定至该参数上。任何时候只要看到函数返回一个对象，就会产生临时对象。

5. 协助完成 “返回值优化（RVO）”
